
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>euccas.github.io</title>
  <meta name="author" content="euccas">

  
  <meta name="description" content="Log4r is a Ruby gem that features a heirachical logging system of any number of levels, custom level names, multiple output destinations per log &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://euccas.github.io/posts/6/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="euccas.github.io" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" type="text/css">
<!--- MathJax Configuration -->
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-52574978-3', 'auto');
    ga('send', 'pageview');

  </script>



</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">euccas.github.io</a></h1>
  
    <h2>why a developer writes</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscribe" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewbox="0 0 100 100"><path class="social" d="M 13.310204,73.332654 C 5.967347,73.332654 0,79.322448 0,86.621428 c 0,7.338776 5.967347,13.262246 13.310204,13.262246 7.370408,0 13.328572,-5.92245 13.328572,-13.262246 0,-7.29898 -5.958164,-13.288774 -13.328572,-13.288774 z M 0.01530612,33.978572 V 53.143878 C 12.493878,53.143878 24.229592,58.02347 33.068368,66.865306 41.894898,75.685714 46.767346,87.47449 46.767346,100 h 19.25 C 66.017346,63.592858 36.4,33.979592 0.01530612,33.978572 l 0,0 z M 0.03877552,0 V 19.17449 C 44.54796,19.17551 80.77551,55.437756 80.77551,100 H 100 C 100,44.87653 55.15102,0 0.03877552,0 z"></path></svg></a></li>
  
</ul>
  
  
  
  
  
<ul class="subscribe">
  <li><a href="https://github.com/euccas" rel="subscribe-github" title="@euccas on GitHub" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewbox="0 0 100 100"><path class="social" d="M 50,0 C 22.385714,0 0,22.385714 0,50 0,77.614286 22.385714,100 50,100 77.614286,100 100,77.614286 100,50 100,22.385714 77.614286,0 50,0 z m 29.692858,79.692858 c -3.859184,3.859182 -8.351022,6.887754 -13.35,9.00306 -1.27041,0.536736 -2.560204,1.009184 -3.867348,1.415306 v -7.493878 c 0,-3.938774 -1.35102,-6.835714 -4.053062,-8.690816 1.692858,-0.163264 3.24694,-0.390816 4.663266,-0.683672 1.416326,-0.292858 2.913266,-0.716328 4.491838,-1.27041 1.57857,-0.55408 2.994896,-1.213264 4.247958,-1.97755 1.253062,-0.765306 2.458164,-1.758164 3.613266,-2.978572 1.155102,-1.220408 2.12449,-2.604082 2.905102,-4.15 0.780612,-1.545918 1.4,-3.40204 1.855102,-5.566326 0.455102,-2.164286 0.683674,-4.54898 0.683674,-7.153062 0,-5.045918 -1.643878,-9.341836 -4.931634,-12.890816 C 77.44796,33.35 77.285714,29.10204 75.463266,24.512244 l -1.22143,-0.145918 c -0.845918,-0.09796 -2.368366,0.260204 -4.565306,1.07449 -2.196938,0.814286 -4.663264,2.14796 -7.396938,4.004082 -3.87449,-1.07449 -7.893878,-1.611224 -12.061224,-1.611224 -4.19898,0 -8.203062,0.536734 -12.012246,1.611224 -1.72449,-1.17245 -3.361224,-2.139796 -4.907142,-2.905102 C 31.753062,25.77449 30.516326,25.254082 29.587756,24.97653 28.660204,24.7 27.79796,24.528572 27,24.463266 c -0.79796,-0.0653 -1.310204,-0.08062 -1.537756,-0.04898 -0.22755,0.03164 -0.390816,0.0653 -0.487754,0.09796 -1.82347,4.62245 -1.985714,8.87143 -0.487756,12.743878 -3.287754,3.54796 -4.931632,7.844898 -4.931632,12.890816 0,2.604082 0.227552,4.988776 0.683674,7.153062 0.456122,2.164286 1.07449,4.020408 1.855102,5.566326 0.780612,1.545918 1.75,2.929592 2.905102,4.15 1.155102,1.220408 2.360204,2.213266 3.613264,2.978572 1.253062,0.766326 2.669388,1.42449 4.24796,1.97755 1.578572,0.554082 3.07551,0.976532 4.491836,1.27041 1.416328,0.292856 2.970408,0.521428 4.663266,0.683672 -2.669388,1.82347 -4.004082,4.720408 -4.004082,8.690816 v 7.639796 C 36.536734,89.818368 35.083674,89.3 33.656122,88.695918 c -4.99898,-2.115306 -9.490816,-5.143878 -13.35,-9.00306 -3.859184,-3.859184 -6.887754,-8.351022 -9.00306,-13.35 C 9.1163263,61.171428 8.0071428,55.67347 8.0071428,50 c 0,-5.67347 1.1091835,-11.171428 3.2969392,-16.342858 2.115306,-4.998978 5.143878,-9.490816 9.00306,-13.35 3.859184,-3.859182 8.351022,-6.887754 13.35,-9.00306 C 38.828572,9.1163266 44.32653,8.0071428 50,8.0071428 c 5.67347,0 11.171428,1.1091838 16.342858,3.2969392 5,2.115306 9.490816,5.143878 13.35,9.00306 3.859182,3.859184 6.887754,8.351022 9.00306,13.35 2.186736,5.17245 3.295918,10.67041 3.295918,16.342858 0,5.672448 -1.109182,11.171428 -3.296938,16.342858 -2.115306,4.998978 -5.143878,9.490816 -9.00204,13.35 l 0,0 z"></path></svg></a></li>
</ul>
  
  
  
<ul class="subscribe">
  <li><a href="https://twitter.com/euccas" rel="subscribe-twitter" title="@euccas on Twitter" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewBox="0 0 512 512"><path class="social" d="M0.001,334.932c33.327,30.816,118.891,59.981,188.517-8.271c-12.52,1.955-22.972-0.416-30.913-8.269
  c-7.531-7.465-7.945-15.182-3.914-22.202c3.275-5.725,10.184-9.741,16.977-13.934c-12.323,2.285-22.829,1.095-32.218-3.706
  c-12.604-6.444-24.863-13.228-28.3-27.207c7.71-8.112,16.28-15.359,34.831-12.627c-17.45-5.83-33.087-13.429-44.41-24.815
  c-11.028-11.091-12.163-18.302-13.932-26.996c9.632-3.567,19.688-5.421,30.478-4.353c-24.397-12.476-34.757-29.63-40.487-48.325
  c-1.731-5.652-2.044-11.03-1.31-16.545c98.826,37.305,145.11,64.109,170.662,89.251c11.496-30.589,38.3-99.868,78.371-123.646
  c0.191,3.77-1.309,7.837-4.357,12.189c11.863-6.609,21.125-17.188,37.445-16.98c-1.879,7.723-7.279,13.904-17.85,17.854
  c10.662-4.084,21.463-7.545,32.65-9.578c10.375-1.881,10.229,6.304,4.355,10.444c-11.916,8.412-24.578,9.456-37.006,13.498
  c38.105,0.949,69.266,18.994,93.604,58.343c8.088,13.074,13.52,26.149,14.807,40.487c16.254,4.563,32.426,5.494,48.76,2.61
  c4.475-0.796,8.645-1.63,12.627-3.482c-6.354,9.529-13.686,17.356-23.947,20.899c-9.811,3.387-19.637,6.688-30.473,6.968
  c17.641,6.675,37.082,7.045,57.033,5.659c-24.402,23.486-43.08,22.922-61.824,22.642c-8.221,34.703-25.025,69.315-60.52,101.005
  c-46.559,41.569-96.678,61.397-148.457,65.742c-48.552,4.07-95.488,3.512-146.726-20.464
  C56.486,393.349,24.648,368.884,0.001,334.932L0.001,334.932z"/></svg></a></li>
</ul>
  
  
  
  
  
  
    
      <form action="https://www.google.com/search" method="get">
        <fieldset role="search">
          <input type="hidden" name="sitesearch" value="euccas.github.io" />
    
          <input class="search" type="text" name="q" results="0" placeholder="Search"/>
        </fieldset>
      </form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/20160518/make-logging-easy-in-ruby-with-log4r.html">Make Logging Easy in Ruby With Log4r</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-18T16:18:07-07:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>4:18 pm</span></time>
        
         | <a href="/20160518/make-logging-easy-in-ruby-with-log4r.html#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>Log4r is a Ruby gem that features a heirachical logging system of any number of levels, custom level names, multiple output destinations per log event, custom formatting, and more. The Log4r gem is open sourced on <a href="https://github.com/colbygk/log4r">GitHub</a>, and with comphrehensive documentations available on <a href="https://github.com/colbygk/log4r">Rubyforge</a>.</p>

<p>I have been using log4r at work in most of the applications and systems written in Ruby. It’s easy to use, and provide the features that an application would need:
- Support multiple message levels such as Fatal, Error, Warn and Msg.<br />
- Customizable log file format
- Multiple output destinations, like print out on the screen, and store in a log file</p>

<p>Here in this post, I’ll show you how to use log4r in your Ruby project.</p>

<h2 id="step-1-install-gem-log4r">Step 1. Install Gem log4r</h2>
<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">gem install log4r</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="step-2-include-log4r-in-your-project">Step 2: Include log4r in your project</h2>

<p>One thing to note is the log4r supports configurations through YAML file, and you can define the configuration file when including the log4r.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class=""><span class="line">require 'log4r'
</span><span class="line">require 'log4r/yamlconfigurator'
</span><span class="line">require 'log4r/outputter/datefileoutputter'
</span><span class="line">require 'log4r/outputter/emailoutputter'
</span><span class="line">include Log4r
</span><span class="line">ycfg = YamlConfigurator    # handy shorthand
</span><span class="line">ycfg.load_yaml_file(File.dirname(__FILE__)+'/l4r.yml')</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="step-3-configure-log4r-with-a-config-file">Step 3: Configure log4r with a config file</h2>

<p>You can define the logging levels, logger names, output destinations, etc. The following code shows an example of the configurations that I use.</p>

<p>File name: log4r.yml</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
</pre></td><td class="code"><pre><code class=""><span class="line">
</span><span class="line">description: config file for log4r
</span><span class="line">
</span><span class="line">---
</span><span class="line"># *** YAML2LOG4R ***
</span><span class="line">log4r_config:
</span><span class="line">  # define all pre config ...
</span><span class="line">  pre_config:
</span><span class="line">    global:
</span><span class="line">      level: DEBUG
</span><span class="line">    root  :
</span><span class="line">      level: DEBUG
</span><span class="line">
</span><span class="line">  # define all loggers ...
</span><span class="line">  loggers:
</span><span class="line">    - name      : myproject 
</span><span class="line">      level     : DEBUG
</span><span class="line">      additive  : 'false'
</span><span class="line">      trace     : 'false'
</span><span class="line">      outputters:
</span><span class="line">        - stderr
</span><span class="line">        - logfile
</span><span class="line">        - email
</span><span class="line">
</span><span class="line">
</span><span class="line">  # define all outputters (incl. formatters)
</span><span class="line">  outputters:
</span><span class="line">    - type     : StderrOutputter
</span><span class="line">      name     : stderr 
</span><span class="line">      level    : INFO
</span><span class="line">      formatter:
</span><span class="line">        date_pattern: #'%y%m%d %H:%M:%S'
</span><span class="line">        pattern     : '[%c] %l: %m'
</span><span class="line">        type        : PatternFormatter
</span><span class="line">
</span><span class="line">    - type        : DateFileOutputter
</span><span class="line">      name        : logfile
</span><span class="line">      level       : DEBUG
</span><span class="line">      date_pattern: #'%Y%m%d'
</span><span class="line">      trunc       : 'false'
</span><span class="line">      dirname     : "."
</span><span class="line">      formatter   :
</span><span class="line">        date_pattern: '%H:%M:%S'
</span><span class="line">        pattern     : '[%c] %d %l: %m'
</span><span class="line">        type        : PatternFormatter
</span><span class="line">  
</span><span class="line">    - type        : EmailOutputter
</span><span class="line">      name        : email
</span><span class="line">      level       : FATAL 
</span><span class="line">      server      : &lt;server domain&gt;
</span><span class="line">      subject     : 'Message myproject:'
</span><span class="line">      from        : &lt;email address&gt;
</span><span class="line">      to          : &lt;email address&gt;
</span><span class="line">      formatter   :
</span><span class="line">        date_pattern: #'%y%m%d %H:%M:%S'
</span><span class="line">        pattern     : '%d %l: %m'
</span><span class="line">        type        : PatternFormatter
</span><span class="line">---</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="step-4-initialize-a-logger">Step 4: Initialize a logger</h2>

<p>You need initialize a logger in your project first.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">logger = Log4r::Logger['myproject']</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="step-5-use-your-logger">Step 5: Use your logger</h2>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class=""><span class="line">logger.info 'My Project Starts!'
</span><span class="line">logger.warn 'Here is a warning'
</span><span class="line">logger.error 'Here is an error'
</span><span class="line">logger.fatal 'Fatal error happens. Program will exit'</span></code></pre></td></tr></table></div></figure></notextile></div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/20160304/use-trello-for-managing-my-projects.html">用Trello做项目管理初体验</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-03-04T21:09:07-08:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>9:09 pm</span></time>
        
         | <a href="/20160304/use-trello-for-managing-my-projects.html#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>大概从18个月前开始，我开始习惯使用<a href="https://trello.com" target="_blank">Trello</a>作为project management and tracking的主要工具，也逐渐体会到Trello的特点和便利之处。总结起来，“不得不使用Trello”的理由有下面一些：</p>

<ul>
  <li>作为项目管理：无形之中的敏捷化</li>
  <li>作为问题记录：即使数目庞多的问题也能够清晰总览，便于分类，每一个问题同时可以有自己的详细记录</li>
  <li>自带的颜色标签和卡片aging效果非常方便呈现了项目总体和每一个task的状态</li>
  <li>一些插件提供了更强大的项目管理功能，比如burndown，甘特图等等</li>
  <li>最重要的特点也许是团队协同工作的便利：team members, assign task, comments</li>
</ul>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/20151215/jenkins-user-habits-2.html">高效Jenkins用户的第2个习惯</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-12-15T20:15:38-08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>8:15 pm</span></time>
        
         | <a href="/20151215/jenkins-user-habits-2.html#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>本文内容部分来源于<strong>Andrew Bayer</strong>发布在SlideShare上的 <a href="http://www.slideshare.net/andrewbayer/seven-habits-of-highly-effective-jenkins-users-2014-edition"><em>7 habits of highly productive Jenkins Users (2014 Edition)</em></a>.</p>

<h1 id="section">习惯 2: 大而化小</h1>

<h2 id="masters">1. 使用多个Masters</h2>

<p>在存在多个project与team的情况下，多个master可以使jenkins jobs的管理更加敏捷和可控</p>

<p>建议根据team, function, access(访问权限) 来划分master</p>

<p>多个master使安装和升级plugin时需要的重启过程变得容易——不需要重启的master不会受到影响</p>

<p>提高系统的稳定性：多个master, 每个master上分配较少数量的jobs，可以使整个系统更为稳定，减少遇到边界情况bug的几率</p>

<h2 id="jobs">2. 分解jobs</h2>

<p>建议在Jenkins中使用模块化和重用，这一点的好处类似于在编程中使用模块化和重用</p>

<p>多job的Build可以方便地在不同的project, release等等中重用</p>

<p>分解job可以避免长时间运行的job在最后阶段出错，导致整个job需要被重新运行：多job的Build可以实现从其中任何一个子job处重新执行</p>

<h2 id="jobs-1">3. 利用工具帮助分解jobs</h2>

<p>混合使用Parameterized trigger, Conditional Build Step, Copy Artifact, Promoted Builds：有效，但是配置困难</p>

<p>Build Pipeline plugin：可以把workflow可视化，集成手工步骤</p>

<p>Workflow plugin: 用DSL定义build steps之间的关系</p>

<p>Jenkins中有许多plugin和有关工具可以实现job分解</p>

<h3 id="jobjenkins-plugins">有关Job分解的Jenkins Plugins</h3>

<h4 id="build-pipeline-pluginhttpswikijenkins-ciorgdisplayjenkinsbuildpipelineplugin"><a href="https://wiki.jenkins-ci.org/display/JENKINS/Build+Pipeline+Plugin">Build Pipeline Plugin</a></h4>
<blockquote>
  <p>This plugin provides a Build Pipeline View of upstream and downstream connected jobs that typically form a build pipeline.  In addition, it offers the ability to define manual triggers for jobs that require intervention prior to execution, e.g. an approval process outside of Jenkins.</p>
</blockquote>

<h4 id="workflow-pluginhttpsgithubcomjenkinsciworkflow-pluginblobmasterreadmemdintroduction"><a href="https://github.com/jenkinsci/workflow-plugin/blob/master/README.md#introduction">Workflow plugin</a></h4>
<blockquote>
  <p>Building continuous delivery pipelines and similarly complex tasks in Jenkins using freestyle projects and traditional plugins can be awkward. You need to mix Parameterized Trigger, Copy Artifact, Promoted Builds, Conditional Build Step, and more just to express what should be a simple script. The Workflow plugin suite attempts to make it possible to directly write that script, what people often call a workflow (sometimes abbreviated flow), while integrating with Jenkins features like slaves and publishers.</p>
</blockquote>

<h4 id="parameterized-trigger-pluginhttpswikijenkins-ciorgdisplayjenkinsparameterizedtriggerplugin"><a href="https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin">Parameterized Trigger plugin</a></h4>
<blockquote>
  <p>This plugin lets you trigger new builds when your build has completed, with various ways of specifying parameters for the new build.
You can add multiple configurations: each has a list of projects to trigger, a condition for when to trigger them (based on the result of the current build), and a parameters section.</p>
</blockquote>

<h4 id="conditional-build-step-pluginhttpswikijenkins-ciorgdisplayjenkinsconditionalbuildstepplugin"><a href="https://wiki.jenkins-ci.org/display/JENKINS/Conditional+BuildStep+Plugin">Conditional Build Step plugin</a></h4>
<blockquote>
  <p>A buildstep wrapping any number of other buildsteps, controlling their execution based on a defined condition.</p>
</blockquote>

<h4 id="copy-artifact-pluginhttpswikijenkins-ciorgdisplayjenkinscopyartifactplugin"><a href="https://wiki.jenkins-ci.org/display/JENKINS/Copy+Artifact+Plugin">Copy Artifact plugin</a></h4>
<blockquote>
  <p>Adds a build step to copy artifacts from another project. The plugin lets you specify which build to copy artifacts from (e.g. the last successful/stable build, by build number, or by a build parameter). You can also control the copying process by filtering the files being copied, specifying a destination directory within the target project, etc. Click the help icon on each field to learn the details, such as selecting Maven or multiconfiguration projects or using build parameters. You can also copy from the workspace of the latest completed build of the source project, instead of its artifacts. All artifacts copied are automatically fingerprinted for you.</p>
</blockquote>

<h4 id="promoted-builds-pluginhttpswikijenkins-ciorgdisplayjenkinspromotedbuildsplugin"><a href="https://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin">Promoted Builds plugin</a></h4>
<blockquote>
  <p>This plugin allows you to distinguish good builds from bad builds by introducing the notion of ‘promotion’.Put simply, a promoted build is a successful build that passed additional criteria (such as more comprehensive tests that are set up as downstream jobs.) The typical situation in which you use promotion is where you have multiple ‘test’ jobs hooked up as downstream jobs of a ‘build’ job. You’ll then configure the build job so that the build gets promoted when all the test jobs passed successfully. This allows you to keep the build job run fast (so that developers get faster feedback when a build fails), and you can still distinguish builds that are good from builds that compiled but had runtime problems.</p>
</blockquote>

<p><strong>阅读同主题内容</strong></p>

<ul>
  <li><a href="http://euccas.github.io/blog/20151210/jenkins-user-habits-1.html">高效Jenkins用户的第1个习惯</a></li>
  <li><a href="http://euccas.github.io/blog/20151215/jenkins-user-habits-2.html">高效Jenkins用户的第2个习惯</a></li>
  <li><a href="http://euccas.github.io/blog/20160523/jenkins-user-habits-3.html">高效Jenkins用户的第3个习惯</a></li>
  <li><a href="http://euccas.github.io/blog/20161010/jenkins-user-habits-4.html">高效Jenkins用户的第4个习惯</a></li>
  <li><a href="http://euccas.github.io/blog/20161216/jenkins-user-habits-5.html">高效Jenkins用户的第5个习惯</a></li>
</ul>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/20151210/jenkins-user-habits-1.html">高效Jenkins用户的第1个习惯</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-12-10T19:32:57-08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>7:32 pm</span></time>
        
         | <a href="/20151210/jenkins-user-habits-1.html#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>本文内容部分来源于<strong>Andrew Bayer</strong>发布在SlideShare上的 <a href="http://www.slideshare.net/andrewbayer/seven-habits-of-highly-effective-jenkins-users-2014-edition"><em>7 habits of highly productive Jenkins Users (2014 Edition)</em></a>.</p>

<h1 id="jenkins-master">习惯 1: 保持Jenkins Master的稳定与可恢复</h1>

<h2 id="lts-release">1. 使用LTS Release</h2>

<p>LTS release每12周发布一个新版本</p>

<p>LTS release版本发布都会保证通过自动化的acceptance testing和手工testing matrix</p>

<h2 id="plugins">2.不要急于升级plugins，保持谨慎</h2>

<p>plugin的升级可能包含非常多的变化</p>

<p>不是所有的升级都会保证向前兼容。比如最近Extended Email Plugin的升级，就造成之前的recipient/trigger配置不可用</p>

<p>新功能也许不稳定</p>

<h2 id="section">3. 对升级进行测试</h2>

<p>建议在测试环境中对升级和新的plugin进行测试，之后再进行production环境的升级</p>

<p>建立针对plugin功能的测试</p>

<p>在更大的规模进行测试</p>

<p>大的改变需要至少经过几天的测试</p>

<h2 id="jenkins-configuration">4. 备份Jenkins Configuration</h2>

<p>建议使用<a href="https://wiki.jenkins-ci.org/display/JENKINS/thinBackup">thinBackup plugin</a></p>

<p>可以通过对$JENKINS_HOME做整体备份实现有效的备份，缺点是速度慢和占用较多的存储空间</p>

<p>Jenkins支持仅仅备份config files，而不需要备份所有的builds。参考<a href="https://gist.github.com/abayer/527063a4519f205efc74">这个gist</a>中的代码实现这一功能。</p>

<h2 id="maven-job">5. 避免使用Maven job类型</h2>

<p>Maven plugin中的Mavin job type可能存在一些问题，包括plugin support, lazy loading等等</p>

<p>在大规模应用中可能会引起一些意外的问题，不建议使用</p>

<h2 id="section-1">一些解释</h2>

<h3 id="lts-release-1">什么是LTS Release?</h3>

<p>Jenkins LTS Release: Jenkins Long-Term Support release. 类似于Ubuntu的LTS版本。</p>

<p>具体说明<a href="https://wiki.jenkins-ci.org/display/JENKINS/LTS+Release+Line">在这里</a>。</p>

<h3 id="jenkins-maven-jobs">关于Jenkins Maven Jobs</h3>

<p>在Jenkins中可以通过两种方式build Maven project</p>

<ol>
  <li>
    <p>使用一个 free-style project 和 Maven build step</p>
  </li>
  <li>
    <p>使用一个 Maven-style project (配置job type为Mavin job type)
推荐使用第一种方法，因为第二种方式可能会出现问题</p>
  </li>
</ol>

<p><strong>阅读同主题内容</strong></p>

<ul>
  <li><a href="http://euccas.github.io/blog/20151210/jenkins-user-habits-1.html">高效Jenkins用户的第1个习惯</a></li>
  <li><a href="http://euccas.github.io/blog/20151215/jenkins-user-habits-2.html">高效Jenkins用户的第2个习惯</a></li>
  <li><a href="http://euccas.github.io/blog/20160523/jenkins-user-habits-3.html">高效Jenkins用户的第3个习惯</a></li>
  <li><a href="http://euccas.github.io/blog/20161010/jenkins-user-habits-4.html">高效Jenkins用户的第4个习惯</a></li>
  <li><a href="http://euccas.github.io/blog/20161216/jenkins-user-habits-5.html">高效Jenkins用户的第5个习惯</a></li>
</ul>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/20140531/the-elements-of-linux-screen.html">The Elements of Linux Screen</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-31T14:51:54-07:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2014</span></span> <span class='time'>2:51 pm</span></time>
        
         | <a href="/20140531/the-elements-of-linux-screen.html#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>The Element of Linux Screen</p>

<p><a href="http://aperiodic.net/screen/start">Linux Screen</a> is a tool installed in Linux system with which you can manage multiple interactive shell processes. With Screen, you can have multiple shells in the same window. You can detach shell processes and attach them when you log into the system from other sessions. With Screen, you don’t need worry about losing your half-way tasks when the terminal exit. I use the Screen on a daily basis, and here I write down the commands and usages that are most commonly used in my everyday work.</p>

<h1 id="start-screen">Start Screen</h1>

<p>In a system where screen is installed, type “screen” in a terminal will invoke it.</p>

<p>If screen isn’t installed in your system, Google “install screen in Linux” to find the solution.</p>

<p>Screen can also has a <strong>session name</strong> when get started:</p>

<p><code>screen -S</code></p>

<p>If no session name is specified, screen will use the default Shell name as the session name.</p>

<p>Example:</p>

<pre><code>Num  Name
0	bash
1	bash
</code></pre>

<h1 id="do-some-configurations">Do some configurations</h1>
<p>Screen uses a configuration file “~/.screenrc”. It could be empty if there is no customized configurations.</p>

<p>You can skip this .screenrc config and use everything set as default by Screen. It will be fine most of the time. However if you use <strong>Emacs</strong>, you might need <strong>change the default command key</strong> used by Screen in the .screenrc file. Here is the why and how.</p>

<p>Command key in Screen means the key input that issues the commands to Screen instead of to Linux shell.
By default, the Screen command key is <code>Ctrl+A</code> (C-A).</p>

<pre><code>C-A ? : show the key binning used by Screen
</code></pre>

<p>Emacs also uses C-A as the command key, so you may face the command key conflict when using Emacs in Screen. To make sure the command key work properly when use Screen and Emacs together, change the command key of Screen in .screenrc to be a command that not used by Emacs.</p>

<p>Some examples:</p>

<pre><code>~/.screenrc$

escape ^L^L   #use Ctrl+L
escape ^^^^   #use Ctrl+^
escape ^]^]   #use Ctrl+]
</code></pre>

<p>Note the first “^” means command key, the second “^” means literal insert key.</p>

<p>You can also set the default caption names when you have multiple shells in one screen</p>

<pre><code>~/.screenrc$

caption always "%{= kw}%-w%{= BW}%n %t%{-}%+w %-= @%H - %LD %d %LM - %c"
</code></pre>

<h1 id="common-screen-commands">Common Screen Commands</h1>

<h2 id="from-linux-shell">From Linux Shell</h2>

<pre><code>screen  	# start a screen
screen -S   # start a screen with a session name
screen -ls  # list current screens
screen -d  	# detach the current screen
screen -r  	# re-attach the screen that was attached
</code></pre>

<h2 id="from-screen">From Screen</h2>

<pre><code>C-a " 		# list all interactive shells
C-a c  		# create a new interactive shell (window)
C-a k  		# kill the current window
C-a n (or ) # switch to the next shell window
C-a p (or )	# switch to the previous shell window
C-a shift-A  # rename current window
C-a S  		# split display horizontally
C-a V  		# split display vertically
C-a tab		# jump to the next display region
C-a X  		# remove current region
C-a Q  		# remove all regions but the current one 
</code></pre>

<p>When split the windows horizontally, use <code>C-a S</code>.
Then use <code>C-a tab</code> to move between the horizontally split regions.</p>

<p><code>screen -S SESSIONNAME</code> is good for starting a session with a name, but if you start a session and later decide to name it or rename it, you’ll need enter command mode <code>(C-a :) </code>and then enter the command <code>sessionname SESSIONNAME</code>.</p>

<p>These are all my notes for using Linux Screen. Hopefully it could help you use it better!</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/5">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014-2017 - euccas -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'euccas-github-io';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>










  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
